
    /* =========================================================
      GLOBAL / RESET
    ========================================================= */
    *, *::before, *::after { box-sizing: border-box; }

    :root{
      --bg-body:#F5F7FA;
      --bg-surface:#ffffff;

      --text-main:#333A45;
      --text-muted:#425466;
      --text-subtle:#6B7280;

      --border-subtle:#E5E7EB;

      --accent-blue:#1A5C96;
      --accent-teal:#20A29D;

      --focus-ring:#1A5C96;

      --radius-lg:16px;
      --shadow-soft:0 8px 22px rgba(15,23,42,.08);

      --danger-text:#8A1C1C;

      --info-bg:#ECF4FA;
      --price-bg:rgba(26,92,150,.07);
      --price-border:rgba(26,92,150,.25);
    }

    body{
      margin:0;
      background:var(--bg-body);
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      color:var(--text-main);
      line-height:1.5;
      -webkit-font-smoothing:antialiased;
    }

    /* --- SVG Icon helpers --- */
    .icon{
      display:inline-block;
      width:20px;
      height:20px;
      vertical-align:middle;
      color:currentColor;
      flex-shrink:0;
    }
    .icon.icon-lg{ width:24px; height:24px; }
    .icon.icon-xl{ width:28px; height:28px; }
    .icon-stroke{ fill:none; stroke:currentColor; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }
    .icon-fill{ fill:currentColor; }

    /* Accessibility: Skip-Link */
    .skip-link{
      position:absolute; left:8px; top:8px;
      padding:8px 12px;
      background:var(--accent-blue);
      color:#fff;
      border-radius:999px;
      text-decoration:none;
      font-size:.9rem;
      transform:translateY(-150%);
      transition:transform .15s ease;
      z-index:1000;
    }
    .skip-link:focus{ transform:translateY(0); outline:none; }

    .shell{
      max-width:1200px;
      margin:0 auto;
      padding:40px 16px 22px;
    }
    @media (min-width:1280px){
      .shell{ padding-left:40px; padding-right:40px; }
    }

    /* =========================================================
      HEADER / NAVIGATION
    ========================================================= */
    header{
      background:var(--bg-surface);
      border-radius:var(--radius-lg);
      padding:20px 24px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      box-shadow:var(--shadow-soft);
      margin-bottom:18px;

      position: sticky;
      top: 16px;
      z-index: 1500;
    }

    .brand{ display:flex; flex-direction:column; gap:2px; }
    .brand-main{ font-size:1.6rem; font-weight:700; display:flex; align-items:center; gap:8px; }
    .brand-dot{ width:10px; height:10px; border-radius:999px; background:var(--accent-teal); }
    .brand-sub{ font-size:.8rem; text-transform:uppercase; letter-spacing:.14em; color:var(--text-subtle); }

    nav[aria-label="Hauptnavigation"]{
      display:flex;
      flex-wrap:wrap;
      gap:16px;
      font-size:.95rem;
    }
    .nav-link{
      border:none;
      background:none;
      padding:4px 0;
      cursor:pointer;
      color:var(--text-muted);
      border-bottom:2px solid transparent;
      font:inherit;
    }
    .nav-link:hover{ color:var(--text-main); }
    .nav-link[aria-current="page"]{
      color:var(--accent-blue);
      font-weight:600;
      border-bottom-color:var(--accent-blue);
    }
    .nav-link:focus-visible,
    .logout-btn:focus-visible{
      outline:2px solid var(--focus-ring);
      outline-offset:2px;
      border-radius:4px;
    }

    .header-actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    #header-search-wrap[hidden]{ display:none !important; }

    .header-search{
      display:flex;
      align-items:center;
      gap:8px;
      border:1px solid var(--border-subtle);
      border-radius:999px;
      background:#fff;
      padding:6px 12px;
      min-width:300px;
    }
    .header-search input{
      border:none;
      outline:none;
      font:inherit;
      width:260px;
      color:var(--text-main);
      background:transparent;
    }
    .header-search input::placeholder{ color:var(--text-subtle); }
    .header-search:focus-within{
      outline:2px solid var(--focus-ring);
      outline-offset:2px;
    }

    .logout-btn{
      display:inline-flex;
      align-items:center;
      gap:6px;
      border:1px solid var(--border-subtle);
      border-radius:999px;
      padding:6px 14px;
      background:#f9fafb;
      color:var(--text-muted);
      cursor:pointer;
      font-size:.9rem;
      white-space:nowrap;
    }
    .logout-btn:hover{ background:#e5e7eb; color:var(--text-main); }

    @media (max-width:720px){
      header{ align-items:flex-start; }
      nav[aria-label="Hauptnavigation"]{ width:100%; justify-content:flex-start; }
      .header-search{ width:100%; min-width:unset; }
      .header-search input{ width:100%; }
    }

    /* =========================================================
      PAGES (Single-Page Navigation)
    ========================================================= */
    main{ position:relative; }
    #main:focus, #main:focus-visible { outline:none !important; }

    .page{
      position:absolute;
      inset:0;
      visibility:hidden;
      pointer-events:none;
      opacity:0;
      transition:opacity 140ms ease;
    }
    .page.is-active{
      position:relative;
      visibility:visible;
      pointer-events:auto;
      opacity:1;
    }

    .page-stage{ min-height: 640px; }

    .page-title{ font-size:1.4rem; font-weight:600; margin:0; }
    .page-description{ font-size:.95rem; color:var(--text-subtle); margin:6px 0 0 0; }

    /* =========================================================
      GENERIC CARDS
    ========================================================= */
    .card{
      background:var(--bg-surface);
      border-radius:var(--radius-lg);
      padding:20px 24px;
      box-shadow:var(--shadow-soft);
      border:1px solid var(--border-subtle);
    }

    /* Patient-Infokarte */
    .patient-card{
      background:var(--bg-surface);
      border-radius:var(--radius-lg);
      padding:20px 24px;
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      gap:16px;
      box-shadow:var(--shadow-soft);
    }
    .patient-icon{
      width:48px;
      height:48px;
      border-radius:999px;
      background:#eef2ff;
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--accent-blue);
      flex-shrink:0;
    }
    .patient-info{ min-width:0; width:auto; }
    .patient-name{ font-size:1.1rem; font-weight:600; margin:0 0 2px 0; }
    .patient-meta{ font-size:.9rem; color:var(--text-subtle); margin:0; }

    /* =========================================================
      UNTERSUCHUNGEN: LISTE / DETAILS
    ========================================================= */
    .exam-section-header{
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:baseline;
      gap:8px;
      margin-top:10px;
    }
    .exam-count{ font-size:.9rem; color:var(--text-subtle); }

    .exam-list{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-top:10px;
    }

    .exam-item{
      background:var(--bg-surface);
      border-radius:var(--radius-lg);
      box-shadow:var(--shadow-soft);
      overflow:hidden;
      border:1px solid var(--border-subtle);
    }

    .exam-item summary{
      list-style:none;
      cursor:pointer;
      padding:14px 18px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .exam-item summary::-webkit-details-marker{ display:none; }
    .exam-item summary:hover{ background:#F9FAFB; }
    .exam-item summary:focus-visible{
      outline:2px solid var(--focus-ring);
      outline-offset:2px;
    }

    .exam-header-main{ display:flex; align-items:center; gap:12px; min-width:0; }
    .exam-folder-icon{ display:flex; align-items:center; justify-content:center; flex-shrink:0; }
    .exam-text-block{ min-width:0; }
    .exam-title{
      font-size:1rem;
      font-weight:600;
      color:var(--text-main);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .exam-sub{
      font-size:.85rem;
      color:var(--text-subtle);
      margin-top:2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .exam-header-meta{
      text-align:right;
      font-size:.9rem;
      color:var(--text-muted);
      flex-shrink:0;
    }
    .exam-date{ font-weight:600; display:block; }
    .exam-type{ font-size:.8rem; }
    .exam-chevron{ margin-left:8px; color:var(--text-subtle); flex-shrink:0; display:flex; align-items:center; }
    details[open] .exam-chevron{ transform:rotate(90deg); }

    .exam-body{
      border-top:1px solid var(--border-subtle);
      padding:12px 18px 16px;
      font-size:.9rem;
      background:#f9fafb;
    }
    .exam-body-grid{
      display:grid;
      grid-template-columns:minmax(0,2fr) minmax(0,1fr);
      gap:8px 24px;
    }
    @media (max-width:720px){
      .exam-body-grid{ grid-template-columns:1fr; }
      .exam-header-meta{ text-align:left; }
    }

    .exam-body-label{ font-weight:600; color:var(--text-muted); margin-right:4px; }
    .exam-body-row + .exam-body-row{ margin-top:4px; }

    .exam-actions{
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
    }

    /* =========================================================
      BUTTONS
    ========================================================= */
    .btn-primary, .btn-secondary{
      transition:background 140ms ease, color 140ms ease, border-color 140ms ease;
      text-decoration:none;
      white-space:nowrap;
    }
    .btn-primary{
      border-radius:999px;
      border:none;
      padding:6px 14px;
      background:var(--accent-blue);
      color:#fff;
      font-size:.9rem;
      cursor:pointer;
    }
    .btn-primary:hover{ background:#144a7a; color:#fff; }
    .btn-secondary{
      border-radius:999px;
      border:1px solid var(--border-subtle);
      padding:6px 14px;
      background:#fff;
      color:var(--text-muted);
      font-size:.9rem;
      cursor:pointer;
    }
    .btn-secondary:hover{
      background:#f3f4f6;
      color:var(--text-main);
      border-color:#D1D5DB;
    }
    .btn-primary:focus-visible, .btn-secondary:focus-visible{
      outline:2px solid var(--focus-ring);
      outline-offset:2px;
    }
    .btn-primary[disabled], .btn-secondary[disabled]{ opacity:.6; cursor:not-allowed; }

    /* =========================================================
      FORMS / INPUTS
    ========================================================= */
    .own-grid{
      display:grid;
      grid-template-columns:minmax(0,1fr) minmax(0,1fr);
      gap:10px 24px;
    }
    @media (max-width:720px){
      .own-grid{ grid-template-columns:1fr; }
    }

    .form-row{ margin-bottom:10px; display:flex; flex-wrap:wrap; gap:8px; align-items:center; width:100%; }
    .form-label{ font-size:.9rem; font-weight:600; color:var(--text-muted); width:100%; }

    .input{
      width:100%;
      border:1px solid var(--border-subtle);
      border-radius:10px;
      padding:10px 12px;
      font-size:.95rem;
      background:#fff;
      color:var(--text-main);
      font-family:inherit;
    }
    .input:focus-visible{ outline:2px solid var(--focus-ring); outline-offset:2px; }

    .select, .textarea{
      width:100%;
      font-size:.9rem;
      padding:8px 10px;
      border-radius:8px;
      border:1px solid var(--border-subtle);
      font-family:inherit;
      background:#fff;
    }
    .textarea{ resize:vertical; }

    .status{
      margin-top:10px;
      font-size:.88rem;
      color:var(--text-subtle);
    }
    .status.is-success{ color:var(--accent-teal); }
    .status.is-error{ color:var(--danger-text); }

    #account-edit-card[hidden]{ display:none !important; }

    .page-footer{
      margin-top:18px;
      padding:14px 0;
      font-size:.8rem;
      text-align:center;
      color:var(--text-subtle);
    }

    /* =========================================================
      ACCOUNT
    ========================================================= */
    .account-summary{
      background:var(--bg-surface);
      border:1px solid var(--border-subtle);
      border-radius:16px;
      padding:16px 20px;
      box-shadow:var(--shadow-soft);
      margin:12px 0 16px 0;
    }
    .summary-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
      gap:16px;
    }
    .muted{ color:var(--text-subtle); font-size:.9rem; }

    .kv{
      display:grid;
      grid-template-columns:140px 1fr;
      gap:8px 14px;
      margin-top:12px;
    }
    .kv .k{ color:var(--text-muted); font-weight:600; font-size:.9rem; }
    .kv .v{ color:var(--text-main); font-size:.95rem; }

/* =========================================================
      KI MODAL
    ========================================================= */
    .modal-overlay[hidden]{ display:none !important; }
    .modal-overlay{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.55);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:2000;
    }
    .modal{
      width:min(760px, 100%);
      background:var(--bg-surface);
      border-radius:18px;
      box-shadow:0 18px 48px rgba(15,23,42,.22);
      border:1px solid var(--border-subtle);
      overflow:hidden;
    }

    .modal-header{
      padding:18px 20px 10px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      background:#fff;
    }
    .modal-title{
      font-size:1.15rem;
      font-weight:700;
      margin:0;
      color:var(--text-main);
    }
    .modal-close-icon{
      border:none;
      background:transparent;
      cursor:pointer;
      line-height:1;
      color:var(--text-subtle);
      padding:6px 8px;
      border-radius:10px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .modal-close-icon:hover{ background:#f3f4f6; color:var(--text-main); }
    .modal-close-icon:focus-visible{
      outline:2px solid var(--focus-ring);
      outline-offset:2px;
    }

    .modal-body{ padding:10px 20px 18px; background:#fff; }

    .modal-text{
      margin:0 0 12px 0;
      font-size:.95rem;
      color:var(--text-subtle);
    }

    .ai-disclaimer{
      background:var(--info-bg);
      border:1px solid rgba(32,162,157,.30);
      border-left:4px solid var(--accent-teal);
      border-radius:14px;
      padding:12px 14px;
      margin:10px 0 12px 0;
      color:var(--text-muted);
      font-size:.92rem;
    }
    .ai-disclaimer strong{ color:var(--accent-blue); }
    .ai-price-badge{
      display:inline-flex;
      align-items:center;
      border-radius:999px;
      padding:6px 10px;
      border:1px solid var(--price-border);
      background:var(--price-bg);
      color:var(--accent-blue);
      font-weight:700;
      font-size:.9rem;
      margin:10px 0 6px;
    }

    .ai-consent-box{
      border:1px solid var(--border-subtle);
      border-radius:12px;
      padding:12px 12px;
      display:flex;
      gap:10px;
      align-items:flex-start;
      margin:8px 0 10px;
      background:#fff;
    }
    .ai-consent-box input{ margin-top:3px; }
    .ai-consent-box label{
      font-size:.92rem;
      color:var(--text-main);
    }
    .ai-consent-box small{
      display:block;
      margin-top:4px;
      color:var(--text-subtle);
    }
    .ai-consent-error{
      display:none;
      margin:6px 0 0 0;
      color:var(--danger-text);
      font-size:.9rem;
    }

    .ai-form-row{ margin-top:10px; }
    .ai-label{
      font-size:.95rem;
      font-weight:600;
      color:var(--text-muted);
      display:block;
      margin-bottom:6px;
    }
    .modal-select, .modal-textarea{
      width:100%;
      border:1px solid var(--border-subtle);
      border-radius:10px;
      padding:10px 12px;
      font:inherit;
      background:#fff;
      color:var(--text-main);
    }
    .modal-textarea{ min-height:92px; resize:vertical; }
    .modal-select:focus-visible, .modal-textarea:focus-visible{
      outline:2px solid var(--focus-ring);
      outline-offset:2px;
    }

    .modal-actions{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:12px;
      align-items:center;
      justify-content:flex-end;
    }

    .ai-result{
      margin-top:12px;
      border:1px dashed var(--border-subtle);
      border-radius:12px;
      background:#f9fafb;
      padding:12px 14px;
      font-size:.95rem;
      color:var(--text-main);
      white-space:pre-wrap;
    }
    .ai-result-placeholder{
      color:var(--text-subtle);
      font-style:italic;
    }
    .modal-status{
      margin-top:8px;
      font-size:.9rem;
      color:var(--text-subtle);
    }
    .modal-status.is-success{ color:var(--accent-teal); }
    .modal-status.is-error{ color:var(--danger-text); }
  